<!-- Meeting controls sidebar -->
<div class="meeting-page-container">
  <aside class="meeting-sidebar" id="meetingSidebar">
    <button id="toggleSidebar" class="toggle-sidebar-btn" title="Toggle sidebar">
      <span class="toggle-icon">◀</span>
    </button>
    <div class="sidebar-content-container">
      <nav class="meeting-sidebar-nav">
        <ul class="meeting-sidebar-menu">
          <li>
            <button id="systemCaptureButton" class="meeting-control-btn" title="Démarrer la capture système" aria-label="System Capture">
              <span class="meeting-icon">🎥</span>
              <span class="meeting-label">Capture Système</span>
            </button>
          </li>
          <li>
            <button id="micCaptureButton" class="meeting-control-btn" title="Démarrer la capture micro" aria-label="Mic Capture">
              <span class="meeting-icon">🎙️</span>
              <span class="meeting-label">Capture Micro</span>
            </button>
          </li>
          <li>
            <button id="suggestionButton" class="meeting-control-btn" title="Générer des suggestions" aria-label="Suggestions">
              <span class="meeting-icon">💡</span>
              <span class="meeting-label">Suggestions</span>
            </button>
          </li>
          <li>
            <button id="saveAndQuitButton" class="meeting-control-btn" title="Save & Quit" aria-label="Save & Quit">
              <span class="meeting-icon">💾</span>
              <span class="meeting-label">Sauvegarder & Quitter</span>
            </button>
          </li>
          <li>
            <button id="quitButton" class="meeting-control-btn" title="Quit" aria-label="Quit">
              <span class="meeting-icon">🚪</span>
              <span class="meeting-label">Quitter</span>
            </button>
          </li>
        </ul>
      </nav>
      <div id="conversationContextHeader" class="conversation-context-header hidden"></div>
    </div>
  </aside>

  <!-- Main content grid: suggestions, screen capture and transcription -->
  <main class="meeting-content-grid" id="meetingContentGrid">
    <!-- Full-extend toggle on content side -->
    <button id="toggleSidebarFull" class="toggle-sidebar-full-btn" title="Toggle full sidebar">
      <span class="toggle-icon-full">▶</span>
    </button>
    <!-- Suggestions area with resize/move controls -->
    <section id="suggestionsArea" class="content-area suggestions-area" data-area="suggestions">
      <div class="area-header">
        <h3>Suggestions</h3>
        <div class="area-controls">
          <button class="area-control move-handle" title="Déplacer"><span>↔</span></button>
          <button class="area-control resize-handle" title="Redimensionner"><span>⤡</span></button>
          <button class="area-control opacity-toggle" title="Ajuster l'opacité"><span>👁️</span></button>
          <button class="area-control hide-toggle" title="Masquer"><span>✕</span></button>
        </div>
      </div>
      <div id="suggestions" class="area-content">
        Suggestions will appear here...
      </div>
    </section>

    <!-- Screen capture area with resize/fullscreen controls -->
    <section id="screenCaptureArea" class="content-area screen-capture-area" data-area="screenCapture">
      <div class="area-header">
        <h3>Screen Capture</h3>
        <div class="area-controls">
          <button class="area-control move-handle" title="Déplacer"><span>↔</span></button>
          <button class="area-control resize-handle" title="Redimensionner"><span>⤡</span></button>
          <button class="area-control fullscreen-toggle" title="Plein écran"><span>⛶</span></button>
          <button id="captureButton" class="area-control capture-button" aria-label="Capture d'écran / Capture screen" title="Capture d'écran / Capture screen"><span>📸</span></button>
        </div>
      </div>
      <div class="area-content">
        <video id="screen-capture" class="video" autoplay muted></video>
      </div>
    </section>

    <!-- Transcription area with resize/move controls -->
    <section id="transcriptionArea" class="content-area transcription-area" data-area="transcription">
      <div class="area-header">
        <h3>Transcription</h3>
        <div class="area-controls">
          <button class="area-control move-handle" title="Déplacer"><span>↔</span></button>
          <button class="area-control resize-handle" title="Redimensionner"><span>⤡</span></button>
          <button class="area-control opacity-toggle" title="Ajuster l'opacité"><span>👁️</span></button>
          <button class="area-control hide-toggle" title="Masquer"><span>✕</span></button>
        </div>
      </div>
      <div id="transcription" class="area-content transcription-box">
        Transcription will appear here...
      </div>
    </section>
  </main>
</div>

<!-- SAVE METHOD MODAL (Meeting) -->
<div id="saveMethodModal" class="meeting-modal">
  <h2>Choose Save Method</h2>
  <div class="save-methods">
    <input type="text" id="saveTitleInput" placeholder="Enter a title for the meeting">
    <button id="localSaveButton" class="button primary">Save Locally</button>
    <button id="supabaseSaveButton" class="button primary">Save to Supabase</button>
  </div>
  <div class="modal-buttons">
    <button id="closeSaveMethodButton" class="button-secondary">Cancel</button>
  </div>
</div>

<!-- Layout presets selector -->
<div class="layout-presets-container">
  <button id="toggleLayoutPresets" class="toggle-presets-btn">Agencements</button>
  <div id="layoutPresetsPanel" class="layout-presets-panel">
    <h4>Préréglages d'agencement</h4>
    <div class="preset-buttons">
      <button data-preset="standard" class="preset-btn active">Standard</button>
      <button data-preset="focusVideo" class="preset-btn">Focus Vidéo</button>
      <button data-preset="focusTranscription" class="preset-btn">Focus Transcription</button>
      <button data-preset="compact" class="preset-btn">Compact</button>
      <button data-preset="overlay" class="preset-btn">Superposition</button>
    </div>
    <button id="saveCurrentLayout" class="save-layout-btn">Sauvegarder cet agencement</button>
  </div>
</div>

<!-- Chatbot UI -->
<button id="chatbotToggle" class="chatbot-toggle-btn" title="Chatbot"><span>💬</span></button>
<div id="chatbotDrawer" class="chatbot-drawer">
  <div class="chatbot-header">
    <h3>Chatbot</h3>
    <select id="chatbotModelSelect" class="chatbot-model-select">
      <option value="mistral-medium">Mistral</option>
      <option value="gpt-3.5-turbo">ChatGPT-3.5</option>
      <option value="gpt-4">ChatGPT-4</option>
    </select>
    <button id="chatbotSettings" class="chatbot-settings-btn" title="Settings">⚙️</button>
    <button id="chatbotClose" class="chatbot-close-btn" title="Close Chatbot">✕</button>
  </div>
  <div id="chatbotSettingsPanel" class="chatbot-settings-panel">
    <label>Opacity <input id="settingsOpacity" type="range" min="20" max="100" value="100"></label>
    <label>Width <input id="settingsWidth" type="number" min="200" max="600" value="320"></label>
    <label>Height <input id="settingsHeight" type="number" min="200" max="800" value="400"></label>
    <button id="chatbotReset" class="chatbot-reset-btn" type="button">Reset Conversation</button>
  </div>
  <div id="chatbotMessages" class="chatbot-messages"></div>
  <!-- Attachments Preview -->
  <div id="chatbotPreview" class="chatbot-preview"></div>
  <div class="chatbot-input-container">
    <button id="chatbotContext" class="chatbot-context-btn" title="Attach context">📄</button>
    <button id="chatbotAttach" class="chatbot-attach-btn" title="Attach files">📎</button>
    <button id="chatbotCamera" class="chatbot-camera-btn" title="Capture image">📷</button>
    <input id="chatbotInput" type="text" placeholder="Ask your question..." />
    <button id="chatbotSend" class="chatbot-send-btn" title="Send">▶</button>
    <input id="chatbotFileInput" type="file" multiple hidden />
    <input id="chatbotCameraInput" type="file" accept="image/*" capture="environment" hidden />
  </div>
</div> 